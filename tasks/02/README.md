## Занятие 2. Основные конструкции

### Содержание
* [Описание занятия](#description)  
* [Конспект](#abstract)
   - [Объекты](#objects)
   - [Типы](#types)  
   - [Функции](#functions)
   - [Указатели](#pointers)
   
  

### Описание занятия <a name="description"></a>
Цели:
- научиться работать с основными выражениями и операторами языка С;  
- научиться применять битовые операции;  
- научиться использовать указатели при обращении к данным.  

Краткое содержание:
- выражения и операторы;  
- битовые операции;  
- указатели.  

Результаты
- код программы на языке С, использующий указатели и битовые операции.

### Конспект <a name="abstract"></a>
---
#### Объекты <a name="objects"></a>
Объект — это хранилище, в котором можно представлять значения.  
В стандарте C (ISO/IEC 9899:2018) объектом называется «область хранилища данных в среде выполнения, содержимое которого может представлять значения» с примечанием: «при обращении к объекту можно считать, что он обладает определенным типом».  
Один из примеров объекта — переменная. 

#### Типы <a name="types"></a>
Каждый тип в C является либо объектным, либо функциональным.


#### Функции <a name="functions"></a>
Функции не являются объектами, но тоже имеют тип.
Тип функции характеризуется как ее возвращаемым значением, так и числом и типами ее параметров.

Параметры — это объекты, которые объявляются вместе с функцией и получают значения при входе в нее.
Аргументы — это выражения, разделяемые запятыми, которые указываются в выражении вызова функции.

Передача аргументов при вызове происходит по значению; то есть когда вы предоставляете функции аргумент, его значение копируется в отдельную переменную, доступную для использования внутри этой функции.

#### Указатели <a name="pointers"></a>
Кроме того, в C есть указатели, которые можно считать адресами — областями памяти, в которых хранятся объекты или функции. Тип указателя, основанный на типе функции или объекта, называется ссылочным типом. Указатель, имеющий ссылочный тип T, называют указателем на T.
Объекты и функции — это разные вещи, и потому объектные указатели отличаются от функциональных и их нельзя использовать как взаимозаменяемые.  

В объявлении или определении функции операция `*` выступает частью объявления указателя, сигнализируя о том, что параметр является указателем на объект или функцию заданного типа.  

`*` — унарная операция косвенного обращения (разыменовывания);  
`&` — унарная операция для взятия адреса, она генерирует указатель на свой операнд.  

```c
void swap(int *a, int *b) {
    int t = *pa;
    *pa = *pb;
    *pb = t;
    return;
}
```
Вызов функции:
```c
swap(&a, &b);
```

#### Объявление переменных
```c
char *src;    // src имеет тип char *
char c;       // c имеет тип char
int x;        // x имеет тип int
int y[5];     // y — это массив из 5 элементов типа int
int n[15][3]; // n — это массив из 15 массивов, состоящих из трех элементов типа int
```
У каждого объекта есть срок хранения, который определяет его время жизни (lifetime) — период выполнения программы, на протяжении которого этот объект существует, где-то хранится, имеет постоянный адрес и сохраняет последнее присвоенное ему значение. К объектам нельзя обращаться вне данного периода.

Локальные переменные, такие как `a` и `b` из листинга ниже, имеют автоматический срок хранения (storage duration); то есть они существуют, пока поток выполнения не покинет блок, в котором они определены. 
```c
#include <stdio.h>

int main(void) {
    int a = 21;
    int b = 17;
}
```
#### Область видимости
Областью видимости идентификатора является участок кода, в котором к объекту, обозначенному этим идентификатором, можно получить доступ по его имени.  
Область видимости может охватывать:
- файл,
- блок,
- прототип функции,
- функцию.

```c
int j;               // начинается область видимости уровня файла j

void f(int i) {      // начинается блочная область видимости i
    int j = 1;       // начинается блочная область видимости j
                     // перекрывает j в области видимости уровня файла
    i++;             // i ссылается на параметр функции
    for (int i = 0; i < 2; i++) { // начинается блочная область видимости i внутри цикла
        int j = 2;         // начинается блочная область видимости j, перекрывает внешнюю j
        printf("%d\n", j); // внутренняя j в области видимости, выводит 2
    }    // заканчивается блочная область видимости внутренних i и j

    printf("%d\n", j);      // внешняя j в области видимости, выводит 1
}       // заканчивается блочная область видимости i и j

void g(int j);  // j имеет область видимости уровня прототипа, перекрывает j уровня файла
```


#### Срок хранения
Объекты имеют срок хранения, который определяет их время жизни.  
В целом сроки хранения бывают 4-х видов: 
1. **Автоматические** (Объекты с автоматическим сроком хранения объявляются внутри блока или в качестве параметров функции. Их время жизни начинается в момент выполнения блока, в котором они объявлены, и заканчивается при его завершении. Если блок вызывается рекурсивно, то при каждом вызове создается новый объект с собственным сроком хранения).
2. **Статические** (Объекты, объявленные на уровне файла. Их время жизни охватывает весь период выполнения программы, а значения, которые в них хранятся, инициализируются еще до ее запуска. Вы также можете объявить переменную со статическим сроком хранения внутри блочной области видимости, используя спецификатор класса хранения `static`. Статические объекты должны инициализироваться с помощью константного значения, а не переменной).
3. **Потоковые** (Используется в конкурентном программировании),
4. **Выделенные** (Динамический срок хранения относится к динамически выделяемой памяти). 

```c
// Программа-счетчик
void increment(void) {
    static unsigned int counter = 0;
    counter++;
    printf("%d ", counter);
}

int main(void) {
    for (int i = 0; i < 5; i++) {
        increment();
    }
    return 0;
}
//  1 2 3 4 5
```

```c
int *func(int i) {
    const int j = i;    // правильно
    static int k = j;   // ОШИБКА
    return &k;
}
```
